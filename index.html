<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vianney Hastings - Photographe & Créateur de sites web</title>
    <link rel="preconnect" href="https://raw.githubusercontent.com">
    <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a1a1a;
            --secondary: #f8f8f6;
            --accent: #c9a96e;
            --text-light: #666;
            --white: #ffffff;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--primary);
            background: var(--white);
            -webkit-font-smoothing: antialiased;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--white);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-logo {
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--primary);
            margin-bottom: 30px;
            animation: pulse 1.5s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading-bar {
            width: 200px;
            height: 2px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background: var(--accent);
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .loading-text {
            margin-top: 20px;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Navigation */
        .nav-horizontal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            z-index: 1000;
            padding: 15px 0;
            transform: translateY(-100%);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-horizontal.visible {
            transform: translateY(0);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 500;
            color: var(--primary);
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 20px;
            transition: all 0.2s ease;
            background: none;
            border: none;
        }

        .logo:hover {
            background: var(--accent);
            color: var(--white);
            transform: translateY(-1px);
        }

        .nav-menu {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }

        .nav-menu a {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 400;
            padding: 6px 12px;
            border-radius: 20px;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-menu a:hover {
            background: var(--accent);
            color: var(--white);
            transform: translateY(-1px);
        }

        /* Hero Section */
        #home {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #1a1a1a;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 0.3s;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)),
                url('https://raw.githubusercontent.com/EmailSortpro/vianneyphotography/main/wedding/1.jpg');
            background-size: cover;
            background-position: center 5%;
            background-repeat: no-repeat;
            transform: scale(1.1);
            animation: heroZoom 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            animation-delay: 0.5s;
        }

        @keyframes heroZoom {
            to { transform: scale(1); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: var(--white);
            padding: 0 20px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            animation-delay: 1s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content h1 {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            font-weight: 300;
            margin-bottom: 20px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
            letter-spacing: 0.02em;
        }

        .hero-content p {
            font-size: clamp(1rem, 3vw, 1.4rem);
            margin-bottom: 10px;
            font-weight: 300;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.6);
        }

        .subtitle2 {
            color: var(--accent);
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
        }

        .cta-button {
            display: inline-block;
            margin-top: 30px;
            padding: 15px 35px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 30px;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(201, 169, 110, 0.3);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            animation-delay: 1.3s;
        }

        .cta-button:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(201, 169, 110, 0.4);
        }

        /* Sections */
        section {
            padding: 80px 20px;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 300;
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .section-subtitle {
            font-size: 1.2rem;
            text-align: center;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto 50px;
        }

        /* About */
        #about {
            background: var(--secondary);
        }

        .about-content {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .about-text p {
            margin-bottom: 20px;
            color: var(--text-light);
            line-height: 1.8;
        }

        .about-image img {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.5s ease;
        }

        .about-image img:hover {
            transform: scale(1.02);
        }

        /* Gallery Grid INSTANTANÉ */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 6px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            background: #e8e8e8;
            cursor: pointer;
            aspect-ratio: 1;
            border-radius: 2px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: scale(0.9);
        }

        .gallery-item.loaded {
            opacity: 1;
            transform: scale(1);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        /* Modal INSTANTANÉE */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.96);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-image {
            max-width: 90%;
            max-height: 85vh;
            object-fit: contain;
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active .modal-image {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 40px;
            font-size: 3rem;
            color: white;
            cursor: pointer;
            z-index: 2001;
            transition: transform 0.2s ease;
            opacity: 0.8;
        }

        .modal-close:hover {
            transform: rotate(90deg);
            opacity: 1;
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border: none;
            user-select: none;
            transition: all 0.2s ease;
            opacity: 0.7;
            border-radius: 4px;
        }

        .modal-nav:hover {
            background: rgba(0, 0, 0, 0.6);
            opacity: 1;
        }

        .modal-prev { left: 20px; }
        .modal-next { right: 20px; }

        .modal-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.6);
            padding: 6px 14px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        /* Sections spécifiques */
        #mariage { background: var(--white); }
        #reportage { background: var(--secondary); }
        #web { background: var(--white); }
        #contact { background: var(--secondary); }

        .four-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px auto;
            max-width: 1200px;
        }

        .column-item {
            padding: 25px;
            background: var(--secondary);
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .column-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .column-item h3 {
            color: var(--accent);
            margin-bottom: 10px;
        }

        .contact-container {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
        }

        .contact-form {
            background: var(--white);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(201, 169, 110, 0.1);
        }

        .submit-btn {
            background: var(--accent);
            color: var(--white);
            padding: 15px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .submit-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .contact-info h4 {
            color: var(--accent);
            margin-bottom: 10px;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .contact-info p {
            color: var(--text-light);
            margin-bottom: 30px;
        }

        /* Mobile */
        @media (max-width: 768px) {
            .nav-menu { display: none; }
            .about-content, .contact-container { grid-template-columns: 1fr; }
            .gallery-grid { 
                grid-template-columns: repeat(3, 1fr);
                gap: 3px;
            }
            .modal-nav {
                font-size: 2rem;
                padding: 15px;
            }
            
            /* Ajustement de la photo d'accueil sur mobile */
            .hero-background {
                background-position: 60% 5%;
            }
        }

        /* Performance */
        img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        * {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">Vianney Hastings</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <div class="loading-text">Chargement des photos...</div>
    </div>

    <!-- Navigation -->
    <nav class="nav-horizontal" id="navigation">
        <div class="nav-container">
            <button class="logo" onclick="location.href='#home'">Vianney Hastings</button>
            <ul class="nav-menu">
                <li><a href="#home">Accueil</a></li>
                <li><a href="#about">À propos</a></li>
                <li><a href="#portrait">Portrait</a></li>
                <li><a href="#mariage">Mariage</a></li>
                <li><a href="#reportage">Reportage</a></li>
                <li><a href="#web">Sites Web</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <section id="home">
        <div class="hero-background"></div>
        <div class="hero-content">
            <h1>Vianney Hastings</h1>
            <p>Photographe Mariages, Événements, Portraits</p>
            <p class="subtitle2">Créateur de sites web</p>
            <a href="#about" class="cta-button">Découvrir mon travail</a>
        </div>
    </section>

    <!-- À propos -->
    <section id="about">
        <div class="about-content">
            <div class="about-text">
                <h2 class="section-title">À propos</h2>
                <p>Vianney, 30 ans, photographe de passion, originaire de Nantes, j'ai beaucoup voyagé entre l'Amérique du sud, l'Asie et le Royaume-Uni où j'ai résidé pendant 5 ans.</p>
                <p>Mon goût pour le voyage m'a donné cette passion pour la photographie que j'ai envie de partager aujourd'hui. J'ai hâte de pouvoir échanger avec vous et de vous accompagner sur chacun de vos projets.</p>
            </div>
            <div class="about-image">
                <img src="https://raw.githubusercontent.com/EmailSortpro/vianneyphotography/main/Vianney.jpg" alt="Vianney">
            </div>
        </div>
    </section>

    <!-- Portrait -->
    <section id="portrait">
        <h2 class="section-title">Portraits</h2>
        <p class="section-subtitle">Capturer l'essence de chaque personnalité</p>
        <div class="gallery-grid" id="portrait-gallery"></div>
    </section>

    <!-- Mariage -->
    <section id="mariage">
        <h2 class="section-title">Mariages</h2>
        <p class="section-subtitle">Votre mariage est unique, chaque instant mérite d'être immortalisé</p>
        <div class="four-columns">
            <div class="column-item">
                <h3>Préparatifs</h3>
                <p>Les moments intimes de préparation</p>
            </div>
            <div class="column-item">
                <h3>Cérémonie</h3>
                <p>L'échange des vœux capturé avec sensibilité</p>
            </div>
            <div class="column-item">
                <h3>Réception</h3>
                <p>L'ambiance festive de votre soirée</p>
            </div>
            <div class="column-item">
                <h3>Couple</h3>
                <p>Des portraits romantiques</p>
            </div>
        </div>
        <div class="gallery-grid" id="wedding-gallery"></div>
    </section>

    <!-- Reportage -->
    <section id="reportage">
        <h2 class="section-title">Reportages & Architecture</h2>
        <p class="section-subtitle">Raconter des histoires à travers l'objectif</p>
        <div class="gallery-grid" id="reportage-gallery"></div>
    </section>

    <!-- Sites Web -->
    <section id="web">
        <h2 class="section-title">Création de Sites Web</h2>
        <p class="section-subtitle">Sites web personnalisés pour votre activité</p>
        <div class="four-columns">
            <div class="column-item">
                <h3>🔍 Qualification</h3>
                <p>Comprendre vos objectifs</p>
            </div>
            <div class="column-item">
                <h3>🧭 Périmètre</h3>
                <p>Définir les fonctionnalités</p>
            </div>
            <div class="column-item">
                <h3>🛠️ Création</h3>
                <p>Développement et tests</p>
            </div>
            <div class="column-item">
                <h3>🔄 Évolutions</h3>
                <p>Maintenance et mises à jour</p>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact">
        <h2 class="section-title">Contact</h2>
        <div class="contact-container">
            <div class="contact-info">
                <h4>Téléphone</h4>
                <p>07 67 28 80 86</p>
                <h4>Email</h4>
                <p>vianneyhastings@gmail.com</p>
                <h4>Localisation</h4>
                <p>Paris et région parisienne</p>
            </div>
            <div class="contact-form">
                <form onsubmit="event.preventDefault(); alert('Message envoyé !');">
                    <div class="form-group">
                        <label>Nom</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" required>
                    </div>
                    <div class="form-group">
                        <label>Message</label>
                        <textarea rows="5"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Envoyer</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div class="modal" id="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <button class="modal-nav modal-prev" onclick="changeImage(-1)">‹</button>
        <img class="modal-image" id="modalImage" src="" alt="">
        <button class="modal-nav modal-next" onclick="changeImage(1)">›</button>
        <div class="modal-counter" id="counter"></div>
    </div>

    <script>
        // Configuration
        const BASE_URL = 'https://raw.githubusercontent.com/EmailSortpro/vianneyphotography/main/';
        
        // Toutes les images du site
        const galleries = {
            portrait: [
                'Alexandra and Janine.jpg',
                'Alexandra.jpg',
                'DSC00045.jpg',
                'DSC00272-scaled.jpg',
                'DSC03483.jpg',
                'DSC03537.jpg',
                'DSC03805.jpg',
                'DSC04454.jpg',
                'DSC04714.jpg',
                'DSC04822 - Copy.jpg',
                'DSC04874 (2) - Copy.jpg',
                'DSC05065.jpg',
                'DSC06155.jpg',
                'DSC06285 (1).jpg',
                'DSC06580.jpg',
                'DSC07129.jpg',
                'DSC08608-scaled.jpg',
                'DSC09922.jpg'
            ],
            wedding: [
                '1.jpg',
                '10.jpg',
                '11.jpg',
                '12.jpg',
                '13.jpg',
                '14.jpg',
                '15.jpg',
                '16.jpg',
                '17.jpg',
                '2.jpg',
                '3.jpG',
                '9.jpg',
                '30.jpg',
                '31.jpg',
                '32.jpg',
                '33.jpg',
                '34.jpg',
                '35.jpg',
                '36.jpg',
                '37.jpg',
                '38.jpg',
                '39.jpg',
                '391.jpg',
                '392.jpg',
                '393.jpg',
                '394.jpg',
                '395.jpg',
                '396.jpg',
                '397.jpg',
                '4.jpg',
                '5.jpg',
                '501.jpg',
                '53.jpg',
                '6.jpg',
                '60.jpg',
                '63.jpg',
                '64.jpg',
                '65.jpg',
                '67.JPG',
                '68.jpg',
                '69.jpg',
                '7.jpg',
                '8.jpg',
                '99.Jpg'
            ],
            reportage: [
                '0.jpg',
                '1.jpg',
                '113.jpg',
                '2.1.jpg',
                '2.jpg',
                '21.jpg',
                '3.jpg',
                '40.jpg',
                '50.jpg',
                '6-2.jpg',
                '7.jpg',
                '8.11.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.27_8379ed0e.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.27_dba4a475.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_01a1ff6e.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_069ac2f4.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_3f6d57e4.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_4bc78b67.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_4d7414d7.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_55211dc9.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_57d726bb.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_715f2551.jpg',
                'WhatsApp Image 2024-11-06 at 10.30.28_e7b2e9b5.jpg'
            ]
        };

        // Cache global pour toutes les images
        const imageCache = new Map();
        let currentGallery = [];
        let currentIndex = 0;
        let totalImages = 0;
        let loadedImages = 0;

        // Calcul du nombre total d'images
        Object.values(galleries).forEach(gallery => {
            totalImages += gallery.length;
        });

        // Préchargement de TOUTES les images au démarrage
        async function preloadAllImages() {
            const loadingProgress = document.getElementById('loadingProgress');
            const allPromises = [];

            // Créer toutes les promesses de chargement
            Object.entries(galleries).forEach(([galleryName, images]) => {
                images.forEach(filename => {
                    const url = `${BASE_URL}${galleryName}/${encodeURIComponent(filename)}`;
                    
                    const promise = new Promise((resolve) => {
                        const img = new Image();
                        img.onload = () => {
                            loadedImages++;
                            const progress = (loadedImages / totalImages) * 100;
                            loadingProgress.style.width = `${progress}%`;
                            imageCache.set(url, img);
                            resolve();
                        };
                        img.onerror = () => {
                            loadedImages++;
                            const progress = (loadedImages / totalImages) * 100;
                            loadingProgress.style.width = `${progress}%`;
                            resolve();
                        };
                        img.src = url;
                    });
                    
                    allPromises.push(promise);
                });
            });

            // Attendre que toutes les images soient chargées
            await Promise.all(allPromises);
            
            // Masquer l'écran de chargement
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                document.getElementById('navigation').classList.add('visible');
                initializeGalleries();
                initializeAnimations();
            }, 500);
        }

        // Initialiser les galeries après le chargement
        function initializeGalleries() {
            createGallery('portrait', 'portrait-gallery');
            createGallery('wedding', 'wedding-gallery');
            createGallery('reportage', 'reportage-gallery');
        }

        // Créer une galerie avec les images préchargées
        function createGallery(galleryName, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const images = galleries[galleryName];
            const fragment = document.createDocumentFragment();
            
            images.forEach((filename, index) => {
                const div = document.createElement('div');
                div.className = 'gallery-item';
                
                const img = document.createElement('img');
                const url = `${BASE_URL}${galleryName}/${encodeURIComponent(filename)}`;
                
                // Utiliser l'image depuis le cache
                if (imageCache.has(url)) {
                    img.src = url;
                    setTimeout(() => {
                        div.classList.add('loaded');
                    }, index * 30); // Animation décalée
                } else {
                    // Fallback si pas en cache
                    img.src = url;
                    img.onload = () => div.classList.add('loaded');
                }
                
                img.alt = `Photo ${index + 1}`;
                
                div.appendChild(img);
                div.onclick = () => openModal(galleryName, index);
                fragment.appendChild(div);
            });
            
            container.appendChild(fragment);
        }

        // Modal instantanée (images déjà en cache)
        function openModal(galleryName, index) {
            const modal = document.getElementById('modal');
            const modalImage = document.getElementById('modalImage');
            const counter = document.getElementById('counter');
            
            currentGallery = galleries[galleryName].map(filename => 
                `${BASE_URL}${galleryName}/${encodeURIComponent(filename)}`
            );
            currentIndex = index;
            
            // Image instantanée depuis le cache
            modalImage.src = currentGallery[currentIndex];
            counter.textContent = `${currentIndex + 1} / ${currentGallery.length}`;
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function changeImage(direction) {
            currentIndex = (currentIndex + direction + currentGallery.length) % currentGallery.length;
            // Changement instantané car l'image est en cache
            document.getElementById('modalImage').src = currentGallery[currentIndex];
            document.getElementById('counter').textContent = `${currentIndex + 1} / ${currentGallery.length}`;
        }

        // Animations au scroll
        function initializeAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('section').forEach(section => {
                observer.observe(section);
            });
        }

        // Gestion clavier
        document.addEventListener('keydown', (e) => {
            const modal = document.getElementById('modal');
            if (!modal.classList.contains('active')) return;
            
            switch(e.key) {
                case 'Escape': closeModal(); break;
                case 'ArrowLeft': changeImage(-1); break;
                case 'ArrowRight': changeImage(1); break;
            }
        });

        // Touch events pour mobile
        let touchStartX = 0;
        const modal = document.getElementById('modal');
        
        modal.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });

        modal.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > 50) {
                changeImage(diff > 0 ? 1 : -1);
            }
        });

        // Empêcher le clic sur l'image de fermer la modal
        document.getElementById('modalImage').addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // Fermer la modal en cliquant sur le fond
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        // LANCEMENT : Précharger toutes les images au démarrage
        window.addEventListener('load', () => {
            preloadAllImages();
        });
    </script>
</body>
</html>
